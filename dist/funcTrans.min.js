!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).FT={})}(this,(function(t){"use strict";const n=/^(\(|[-+]|(\d*\.\d+)|(\d+\.\d*)|\d+|[*\/]|\)|\^|(ln|lg|log)|(cos|sin|tan|cot)|x|\|)/,e=/^[+-]+\d+$/,s=/^\d+$/,r=/((^\d*\.\d+$)|(^\d+\.\d*$))/,i=/((^([+-]+)?\d*\.\d+$)|(^([+-]+)?\d+\.\d*$))/,o=/^\($/,f=/^\)$/,u=/^\^\|$/,h=/^\$\|$/,a=function(t,n){let e=n.shift(),s=`Math.log(${Array.isArray(e)?A(e):e})`;t.push(s)},l=function(t,n,e){let s=n.shift(),r=`Math.${e}(${Array.isArray(s)?A(s):s})`;t.push(r)},c={"^":function(t,n){let e=t.pop(),s=n.shift(),r=`Math.pow(${Array.isArray(e)?A(e):e},${Array.isArray(s)?A(s):s})`;t.push(r)},ln:a,log:a,lg:function(t,n){let e=n.shift(),s=`Math.log(${Array.isArray(e)?A(e):e})/Math.log(10)`;t.push(s)},sin:l,cos:l,tan:l,cot:function(t,n){let e=n.shift();e=Array.isArray(e)?A(e):e;let s=`Math.cos(${e})/Math.sin(${e})`;t.push(s)},abs:function(t){return t.unshift("Math.abs("),t.push(")"),t}},d={x:function(t,n){n>0&&(g(t[n-1])||(e=t[n-1],f.test(e))||function(t){return h.test(t)}(t[n-1]))&&(t[n]=`*${t[n]}`);var e;n<t.length-1&&(g(t[n+1])||function(t){return o.test(t)}(t[n+1])||function(t){return u.test(t)}(t[n+1]))&&(t[n]=`${t[n]}*`)},"(":function(){},")":function(){},ln:p,lg:p,log:p,sin:$,cos:$,tan:$,cot:$};function p(t,n){n>0&&g(t[n-1])&&(t[n-1]=`${t[n-1]}*`)}function $(t,n){n>0&&g(t[n-1])&&(t[n-1]=`${t[n-1]}*`)}function g(t){return e.test(t)||s.test(t)||r.test(t)||i.test(t)}function y(t){let e=[],s=!1,r=!1;for(;t;)if(s=!1,t=t.replace(n,((t,n)=>(s=!0,r||"|"!==t||(r=!0,t="^|"),r&&"|"===t&&(r=!1,t="$|"),e.push(t),""))),!s&&t)throw"illegal expression";return function(t){let n=[],e=t.shift();const s={"(":function(){let s="";e=t.shift();let r=1,i=0;for(;e&&("("===e&&r++,")"===e&&i++,r!==i);)s+=e,e=t.shift();if(r!==i)throw"leftParentheses and leftParentheses are mismatching";n.push(y(s))},"^|":function(){let s="";e=t.shift();let r=1,i=0;for(;e&&("$|"===e&&i++,i!==r);)s+=e,e=t.shift();if(r!==i)throw"leftAbsSign and rightAbsSign are mismatching";n.push(c.abs(y(s)))}};for(;e;)s[e]?s[e]():n.push(e),e=t.shift();return n}(function(t){for(let n=0;n<t.length;n++){let e=t[n];d[e]&&d[e](t,n)}return t}(e))}function A(t){let n=[],e=t.shift();for(;e;)Array.isArray(e)?(n.push(A(e)),e=t.shift()):(c[e]?c[e](n,t,e):n.push(e),e=t.shift());return function(t){return t.unshift("("),t.push(")"),t.join("")}(n)}t.expressionGenerator=A,t.expressionParser=function(t){return A(y(t))},Object.defineProperty(t,"__esModule",{value:!0})}));
